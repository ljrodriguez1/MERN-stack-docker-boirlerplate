(this.webpackJsonpreact0=this.webpackJsonpreact0||[]).push([[0],{50:function(e,t,a){e.exports=a(83)},55:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(28),o=a.n(s),c=(a(55),a(3)),i=a(4),u=a(6),l=a(5),d=a(14),m=a(11),p=a(22),h=a.n(p),f=a(25),v=a.n(f),g=function(e){e?v.a.defaults.headers.common.Authorization=e:delete v.a.defaults.headers.common.Authorization},b=function(e){return{type:"SET_CURRENT_USER",payload:e}},E=function(){return function(e){localStorage.removeItem("jwtToken"),g(!1),e(b({}))}},y=a(10),O=a(20),C=a(47),S=a(49),_=a(21),w=a(2),j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIAL_DATA":return Object(w.a)(Object(w.a)({},e),{},{list:[].concat(Object(_.a)(e.list),Object(_.a)(t.users))});case"NEW_USER_CONNECTED":return Object(w.a)(Object(w.a)({},e),{},{list:Object(_.a)(t.users)});default:return e}},N=function(){if(localStorage.jwtToken)return console.log(localStorage.jwtToken),localStorage.jwtToken},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIAL_DATA":return Object(w.a)(Object(w.a)({},e),t.users.find((function(e){return e.cookie===N()})));case"USER_INTIALIZATION_START":case"USER_INTIALIZATION_FINISH":case"USER_DISCONECTED":return Object(w.a)(Object(w.a)({},e),{},{connectionStatus:t.status});case"FAVORIVE_CHANNEL_ADDED":return Object(w.a)(Object(w.a)({},e),{},{favoriteChats:t.favoriteChats});default:return e}},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_INTIALIZATION_START":case"USER_INTIALIZATION_FINISH":case"USER_DISCONECTED":return Object(w.a)(Object(w.a)({},e),{},{errorType:t.errorType});case"ERROR_RECEIVED":return Object(w.a)(Object(w.a)({},e),{},{errorType:t.errorType,errorMessage:t.errorMessage});case"SHOW_DEBUG":case"HIDE_DEBUG":case"HIDE_DEBUG_MANUAL":return Object(w.a)(Object(w.a)({},e),{},{showDebug:t.showDebug});default:return e}},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"HIDE_DEBUG_MANUAL":return Object(w.a)(Object(w.a)({},e),{},{disableBlurOverlay:t.disableBlur});case"SOMEONE_TYPING":return Object(w.a)(Object(w.a)({},e),{},{typingUsers:t.typingUsers});case"SIDEBAR_TOGGLER":return Object(w.a)(Object(w.a)({},e),{},{showSidebar:!e.showSidebar});case"HIDE_SIDEBAR":return Object(w.a)(Object(w.a)({},e),{},{showSidebar:t.status});case"UNREADED_MESSAGE":var a=JSON.parse(JSON.stringify(e.unreadedMessages));return e.unreadedMessages.length<=0||!a.find((function(e){return e.ID===t.chat.ID}))?a.push({ID:t.chat.ID,type:t.chat.type,unreadedCount:1}):a.forEach((function(e,r){return e.ID===t.chat.ID&&a.splice(r,1,Object(w.a)(Object(w.a)({},e),{},{unreadedCount:e.unreadedCount+1}))})),Object(w.a)(Object(w.a)({},e),{},{unreadedMessages:a});case"CHAT_SELECTED":return Object(w.a)(Object(w.a)({},e),{},{unreadedMessages:e.unreadedMessages.filter((function(e){return e.ID!==t.payload.chatID}))});default:return e}},A=a(18),U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIAL_DATA":return Object(w.a)(Object(w.a)({},e),t.chats);case"ADD_MESSAGE":return Object(w.a)(Object(w.a)({},e),{},Object(A.a)({},t.chat.type,e[t.chat.type].map((function(e){return e.ID===t.chat.ID?Object(w.a)(Object(w.a)({},e),{},{messages:[].concat(Object(_.a)(e.messages),[{layout:t.messageType,message:t.message,author:t.author,timestamp:t.timestamp,uuid:t.uuid,uuidAuthor:t.uuidAuthor}])}):e}))));case"MESSAGE_RECEIVED":var a=JSON.parse(JSON.stringify(e)),r=Object.keys(a),n=r.map((function(e){return Object(A.a)({},e,a[e].map((function(e){var a=e;return t.chats.some((function(e){return e.ID===a.ID}))&&a.messages.push(t.message),a})))}))[0];return Object(w.a)(Object(w.a)({},a),n);case"NEW_CHAT_CREATED":return Object(w.a)(Object(w.a)({},e),{},Object(A.a)({},t.payload.newChat.type,[].concat(Object(_.a)(e[t.payload.newChat.type]),[t.payload.newChat])));default:return e}},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHAT_SELECTED":return Object(w.a)(Object(w.a)({},e),{},{chatType:t.payload.chatType,chatID:t.payload.chatID,title:t.payload.title});default:return e}},x=a(79),M={isAuthenticated:!1,user:{},loading:!1};var R={};var L=Object(O.c)({currentUser:T,users:j,debug:D,common:I,chats:U,currentChat:k,auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return Object(w.a)(Object(w.a)({},e),{},{isAuthenticated:!x(t.payload),user:t.payload});case"USER_LOADING":return Object(w.a)(Object(w.a)({},e),{},{loading:!0});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return t.payload;default:return e}}}),P=function(){return{type:"USER_DISCONECTED",status:"disconnected",errorType:"userDisconnected"}},B=a(31),H=function(){return{type:"SHOW_DEBUG",showDebug:!0}},F=function(){return{type:"HIDE_DEBUG",showDebug:!1}},G=function(){return{subscribeUser:function(e,t){if(localStorage.jwtToken){var a=localStorage.jwtToken,r={type:"ADD_USER",name:h()(a).name,cookie:a};e.send(JSON.stringify(r))}},dataParser:function(e){return JSON.parse(e.data)}}},W=null,V=function(e,t){var a,r=t().currentUser,n=(r=void 0===r?{}:r).cookie;e.typingUsers.some((function(e){return e.cookie===n}))&&(a=e.typingUsers).splice.apply(a,[0,e.typingUsers.length].concat(Object(_.a)(e.typingUsers.filter((function(e){return e.cookie!==n})))))},J=function(e,t){var a=e.getState,r=e.dispatch,n=new WebSocket("wss://iic2713.me/"),s=function(e){return{startPostponeTimer:function(t,a){W=setTimeout((function(){return e(t())}),a)},clearPostponeTimer:function(t,a){var r=a(),n=r.currentUser.isConnected,s=void 0!==n&&n,o=r.debug.showDebug,c=void 0!==o&&o;clearTimeout(W),!c&&s||e(t())}}}(r),o=s.startPostponeTimer,c=s.clearPostponeTimer;return r({type:"USER_INTIALIZATION_START",status:"inProgress",errorType:"userIsNotConnected"}),o(H,3e3),n.onopen=function(){G().subscribeUser},n.onmessage=function(e){var t,n=(0,G().dataParser)(e);switch(n.type){case"INITIAL_DATA":r(function(e){return{type:"INITIAL_DATA",chats:e.chats,users:e.users,typingUsers:e.typingUsers}}(n)),r({type:"USER_INTIALIZATION_FINISH",status:"connected",errorType:""}),c(F,a);break;case"ADD_MESSAGE":delete n.type;var s=a().currentChat,o=n.chats[0];"message"===n.layout&&o.ID!==s.chatID&&r({type:"UNREADED_MESSAGE",chat:{chat:o}.chat}),r(function(e){return{type:"MESSAGE_RECEIVED",chats:e.chats,message:Object(B.a)(e,["chats"])}}(n));break;case"USERS_LIST":r({type:"NEW_USER_CONNECTED",users:n.users});break;case"NEW_CHAT_CREATED":r({type:"NEW_CHAT_CREATED",payload:n});break;case"SOMEONE_TYPING":delete n.type,V(n,a),r(function(e){return{type:"SOMEONE_TYPING",typingUsers:e}}(n.typingUsers));break;case"FAVORITE_CHANNEL_SETTED":r({type:"FAVORIVE_CHANNEL_ADDED",favoriteChats:n.favoriteChats});break;case"ERROR_RECEIVED":r({type:"ERROR_RECEIVED",errorType:(t=n).errorType,errorMessage:t.message})}},n.onclose=function(){r({type:"USER_DISCONECTED",status:"disconnected",errorType:"userDisconnected"}),r({type:"SHOW_DEBUG",showDebug:!0})},n},Y=a(27),z=a.n(Y),X=a(23),Z=z.a.mark(ae);function K(e){return console.log("i did send a message"),function(t){return e.send(JSON.stringify(t))}}function q(e){return function(t){return e.send(JSON.stringify(t))}}function $(e){return function(t){var a={type:"SOMEONE_TYPING",chat:t.payload.chat,name:t.payload.author,uuid:t.payload.uuid,cookie:N()};e.send(JSON.stringify(a))}}function Q(e){return z.a.mark((function t(a){var r;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(w.a)(Object(w.a)({},a),{},{type:"CREATE_NEW_CHAT"}),t.next=3,e.send(JSON.stringify(r));case 3:case"end":return t.stop()}}),t)}))}function ee(e){return console.log("i did here"),function(t){return e.send(JSON.stringify(t))}}function te(e){return function(t){var a={type:"REMOVE_USER",cookie:N()};e.send(JSON.stringify(a))}}function ae(e){return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(X.a)("ADD_MESSAGE",K(e));case 2:return t.next=4,Object(X.b)("USER_TYPING",$(e));case 4:return t.next=6,Object(X.b)("CREATE_NEW_CHAT",Q(e));case 6:return t.next=8,Object(X.b)("SET_FAVORITE",q(e));case 8:return t.next=10,Object(X.a)("ADD_USER",ee(e));case 10:return t.next=12,Object(X.a)("USER_DISCONECTED",te(e));case 12:case"end":return t.stop()}}),Z)}var re,ne=ae;if(localStorage.jwtToken){var se=localStorage.jwtToken;re=h()(se).name}else re=void 0;var oe=re,ce=a(48),ie=Object(ce.createLogger)({collapsed:!0,timestamp:!1,diff:!0}),ue={currentUser:{isAuth:!1,name:"",uuid:null,connectionStatus:"notConnected"},debug:{errorType:"",errorMessage:"",showDebug:!1},users:{list:[]},common:{showSidebar:!1,disableBlurOverlay:!1,unreadedMessages:[],typingUsers:[]},chats:{direct:[],rooms:[]},currentChat:{title:"global",chatType:"rooms",chatID:"global"}},le=[C.a],de=Object(S.a)(),me=Object(O.e)(L,ue,Object(O.d)(Object(O.a)(de,ie),O.a.apply(void 0,le))),pe=J(me,oe);de.run(ne,pe);var he=me,fe=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"navbar-fixed"},n.a.createElement("nav",{className:"z-depth-0"},n.a.createElement("div",{className:"nav-wrapper white"},n.a.createElement(d.b,{to:"/",style:{fontFamily:"monospace"},className:"col s5 brand-logo center black-text"},n.a.createElement("i",{className:"material-icons"},"code"),"Lucas Chat App"))))}}]),a}(r.Component),ve=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{style:{height:"75vh"},className:"container valign-wrapper"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col s12 center-align"},n.a.createElement("p",{className:"flow-text grey-text text-darken-1"},"Create an user or login to join Chat app"),n.a.createElement("br",null),n.a.createElement("div",{className:"col s6"},n.a.createElement(d.b,{to:"/register",style:{width:"140px",borderRadius:"3px",letterSpacing:"1.5px"},className:"btn btn-large waves-effect waves-light hoverable blue accent-3"},"Register")),n.a.createElement("div",{className:"col s6"},n.a.createElement(d.b,{to:"/login",style:{width:"140px",borderRadius:"3px",letterSpacing:"1.5px"},className:"btn btn-large btn-flat waves-effect white black-text"},"Log In")))))}}]),a}(r.Component),ge=a(12),be=a.n(ge),Ee=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).onChange=function(t){e.setState(Object(A.a)({},t.target.id,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a={name:e.state.name,email:e.state.email,password:e.state.password,password2:e.state.password2};e.props.registerUser(a,e.props.history)},e.state={name:"",email:"",password:"",password2:"",errors:{}},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/dashboard")}},{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col s8 offset-s2"},n.a.createElement(d.b,{to:"/",className:"btn-flat waves-effect"},n.a.createElement("i",{className:"material-icons left"},"keyboard_backspace")," Back to home"),n.a.createElement("div",{className:"col s12",style:{paddingLeft:"11.250px"}},n.a.createElement("h4",null,n.a.createElement("b",null,"Register")," below"),n.a.createElement("p",{className:"grey-text text-darken-1"},"Already have an account? ",n.a.createElement(d.b,{to:"/login"},"Log in"))),n.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},n.a.createElement("div",{className:"input-field col s12"},n.a.createElement("input",{onChange:this.onChange,value:this.state.name,error:e.name,id:"name",type:"text",className:be()("",{invalid:e.name})}),n.a.createElement("label",{htmlFor:"name"},"Name"),n.a.createElement("span",{className:"red-text"},e.name)),n.a.createElement("div",{className:"input-field col s12"},n.a.createElement("input",{onChange:this.onChange,value:this.state.email,error:e.email,id:"email",type:"email",className:be()("",{invalid:e.email})}),n.a.createElement("label",{htmlFor:"email"},"Email"),n.a.createElement("span",{className:"red-text"},e.email)),n.a.createElement("div",{className:"input-field col s12"},n.a.createElement("input",{onChange:this.onChange,value:this.state.password,error:e.password,id:"password",type:"password",className:be()("",{invalid:e.password})}),n.a.createElement("label",{htmlFor:"password"},"Password"),n.a.createElement("span",{className:"red-text"},e.password)),n.a.createElement("div",{className:"input-field col s12"},n.a.createElement("input",{onChange:this.onChange,value:this.state.password2,error:e.password2,id:"password2",type:"password",className:be()("",{invalid:e.password2})}),n.a.createElement("label",{htmlFor:"password2"},"Confirm Password"),n.a.createElement("span",{className:"red-text"},e.password2)),n.a.createElement("div",{className:"col s12",style:{paddingLeft:"11.250px"}},n.a.createElement("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},type:"submit",className:"btn btn-large waves-effect waves-light hoverable blue accent-3"},"Sign up"))))))}}]),a}(r.Component),ye=Object(y.b)((function(e){return{auth:e.auth,errors:e.errors}}),{registerUser:function(e,t){return function(a){v.a.post("/api/users/register",e).then((function(e){return t.push("/login")})).catch((function(e){return a({type:"GET_ERRORS",payload:e.response.data})}))}}})(Object(m.g)(Ee)),Oe=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).onChange=function(t){e.setState(Object(A.a)({},t.target.id,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a={email:e.state.email,password:e.state.password};e.props.loginUser(a)},e.state={email:"",password:"",errors:{}},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){if(this.props.auth.isAuthenticated){var e={name:this.props.auth.user.name,cookie:localStorage.jwtToken,id:this.props.auth.user.id};console.log(e),this.props.dispatchLogin(e),console.log("i did add an user"),this.props.history.push("/dashboard")}}},{key:"componentWillReceiveProps",value:function(e){if(e.auth.isAuthenticated){var t={name:e.auth.user.name,cookie:localStorage.jwtToken,id:e.auth.user.id};console.log("-----------------------------------------------------------------------------------------------------------"),console.log(e.auth),console.log(t),console.log("hola estoy aqui"),this.props.dispatchLogin(t),this.props.history.push("/dashboard")}e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return n.a.createElement("div",{className:"container"},n.a.createElement("div",{style:{marginTop:"4rem"},className:"row"},n.a.createElement("div",{className:"col s8 offset-s2"},n.a.createElement(d.b,{to:"/",className:"btn-flat waves-effect"},n.a.createElement("i",{className:"material-icons left"},"keyboard_backspace")," Back to home"),n.a.createElement("div",{className:"col s12",style:{paddingLeft:"11.250px"}},n.a.createElement("h4",null,n.a.createElement("b",null,"Login")," below"),n.a.createElement("p",{className:"grey-text text-darken-1"},"Don't have an account? ",n.a.createElement(d.b,{to:"/register"},"Register"))),n.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},n.a.createElement("div",{className:"input-field col s12"},n.a.createElement("input",{onChange:this.onChange,value:this.state.email,error:e.email,id:"email",type:"email",className:be()("",{invalid:e.email||e.emailnotfound})}),n.a.createElement("label",{htmlFor:"email"},"Email"),n.a.createElement("span",{className:"red-text"},e.email,e.emailnotfound)),n.a.createElement("div",{className:"input-field col s12"},n.a.createElement("input",{onChange:this.onChange,value:this.state.password,error:e.password,id:"password",type:"password",className:be()("",{invalid:e.password||e.passwordincorrect})}),n.a.createElement("label",{htmlFor:"password"},"Password"),n.a.createElement("span",{className:"red-text"},e.password,e.passwordincorrect)),n.a.createElement("div",{className:"col s12",style:{paddingLeft:"11.250px"}},n.a.createElement("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},type:"submit",className:"btn btn-large waves-effect waves-light hoverable blue accent-3"},"Login"))))))}}]),a}(r.Component),Ce=Object(y.b)((function(e){return{auth:e.auth,errors:e.errors}}),(function(e){return{dispatchLogin:function(t){return e({type:"ADD_USER",name:(a=t).name,cookie:a.cookie,id:a.id});var a},loginUser:function(t){return e((a=t,function(e){v.a.post("/api/users/login",a).then((function(t){var a=t.data.token;localStorage.setItem("jwtToken",a),g(a);var r=h()(a);e(b(r)),r.name})).catch((function(t){return e({type:"GET_ERRORS",payload:t.response.data})}))}));var a}}}))(Oe),Se={1:{name:"rooms",svg:n.a.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",width:"50",height:"50",viewBox:"0 0 24 24"},n.a.createElement("path",{xmlns:"http://www.w3.org/2000/svg",d:"M20 9.352c0-4.852-4.751-8.352-10-8.352-5.281 0-10 3.526-10 8.352 0 1.711.615 3.391 1.705 4.695.047 1.527-.851 3.718-1.661 5.312 2.168-.391 5.252-1.258 6.649-2.115 7.697 1.877 13.307-2.842 13.307-7.892zm-14.5 1.38c-.689 0-1.25-.56-1.25-1.25s.561-1.25 1.25-1.25 1.25.56 1.25 1.25-.561 1.25-1.25 1.25zm4.5 0c-.689 0-1.25-.56-1.25-1.25s.561-1.25 1.25-1.25 1.25.56 1.25 1.25-.561 1.25-1.25 1.25zm4.5 0c-.689 0-1.25-.56-1.25-1.25s.561-1.25 1.25-1.25 1.25.56 1.25 1.25-.561 1.25-1.25 1.25zm8.383 8.789c-.029 1.001.558 2.435 1.088 3.479-1.419-.258-3.438-.824-4.352-1.385-3.365.818-6.114-.29-7.573-2.1 4.557-.66 8.241-3.557 9.489-7.342 1.48.979 2.465 2.491 2.465 4.274 0 1.12-.403 2.221-1.117 3.074z"}))},2:{name:"favorites",svg:n.a.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",width:"50",height:"50",viewBox:"0 0 24 24"},n.a.createElement("path",{d:"M18 1l-6 4-6-4-6 5v7l12 10 12-10v-7z"}))}},_e=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s)))._handleClick=function(t){var a=t.currentTarget.dataset.area;(0,e.props.setActiveArea)(a)},e._renderDots=function(){var t=e.props,a=t.areas,r=t.activeArea;return Array.from(Array(a).keys()).map((function(t,a){var s=Se[a+1],o=be()(Object(A.a)({dot:!0,activeArea:r===a+1},"dotArea".concat(s.name.toUpperCase()),!0));return n.a.createElement("button",{"data-area":s.name,type:"button",key:t,onClick:e._handleClick,className:o},s.svg)}))},e}return Object(i.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"dotsWrap"},this._renderDots())}}]),a}(n.a.PureComponent);_e.defaultProps={areas:1,activeArea:1,setActiveArea:function(){}};var we=_e,je=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(c.a)(this,a),(r=t.call(this,e))._createDirectChatID=function(){var e=r.props,t=e.currentUser,a=e.configuration;return"".concat(t.uuid+a.uuid)},r._directChat=function(e,t){var a=r.props,n=a.currentUser,s=a.createNewDirectChat,o=a.chats,c=r._createDirectChatID();e.currentUserID=n.uuid,e.chatID=c,e.allowedUsers=[n.uuid,t],!o.direct.some((function(e){return e.ID===c}))&&s(e)},r._selectChat=function(e){var t=r.props,a=t.configuration,n=t.chatSelected,s=t.type,o=e.currentTarget.dataset,c=o.id,i=o.title;console.log(a.ID.toString());var u={chatType:s,title:i,chatID:a.ID.toString(),uuid:a.uuid,userID:c};"direct"===s&&r._directChat(u,Number(c)),n(u)},r._handleDown=function(e){e.persist(),r.setState((function(t){return Object(w.a)(Object(w.a)({},t),{},{coordsStart:{X:e.clientX,Y:e.clientY}})}))},r._handleUp=function(e){var t=r.state.coordsStart,a={X:e.clientX,Y:e.clientY};JSON.stringify(t)===JSON.stringify(a)&&r._selectChat(e)},r._unreadedMessagesFlag=function(){var e=r.props,t=e.unreadedMessages,a=e.configuration.ID,s=e.type;if(!a||!t||t.length<=0)return null;var o=t.find((function(e){return"rooms"===s?String(e.ID)===String(a):String(e.ID)===String(r._createDirectChatID())}));return o&&0!==o.length?n.a.createElement("span",{className:"unrededMessageWrap"},o.unreadedCount):null},r.state={coordsStart:null},r}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.currentChat,a=e.configuration,r=a.name,s=a.uuid,o=a.isConnected,c=e.isCurrentUser,i=be()({authorContainer:!0,authorDisconnected:!o,chatSelected:r===t.title});return n.a.createElement("button",{type:"button",key:s,"data-id":s,"data-title":r,onMouseDown:this._handleDown,onMouseUp:this._handleUp,className:i},n.a.createElement("span",{className:"authorAvatar authorWrap"},n.a.createElement("svg",{width:"100%",height:"100%","data-jdenticon-value":r})),n.a.createElement("span",{className:"authorName sidebarAuthorName"},c?"".concat(r," (you)"):r),this._unreadedMessagesFlag())}}]),a}(n.a.PureComponent);je.defaultProps={currentChat:{},isCurrentUser:!1,currentUser:{},chats:[],unreadedMessages:[],createNewDirectChat:function(){},chatSelected:function(){},unreadedMessagesRead:function(){}};var Ne=je,Te=Object(y.b)((function(e){return{unreadedMessages:e.common.unreadedMessages,currentUser:e.auth.user,currentChat:e.currentChat,chats:e.chats}}),(function(e){return{createNewDirectChat:function(t){return e({type:"CREATE_NEW_CHAT",payload:t})},chatSelected:function(t){return e({type:"CHAT_SELECTED",payload:t})}}}))(Ne),De=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.width,a=e.height,r=e.color;return n.a.createElement("span",{className:"loadingSpinner",style:{width:t,height:a}},n.a.createElement("svg",{className:"lds-microsoft",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"},n.a.createElement("g",{transform:"rotate(0)"},n.a.createElement("circle",{cx:"73.801",cy:"68.263",fill:r,r:"3",transform:"rotate(359.751 49.9984 49.9984)"},n.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",calcMode:"spline",values:"0 50 50;360 50 50",times:"0;1",keySplines:"0.5 0 0.5 1",repeatCount:"indefinite",dur:"1.5s",begin:"0s"})),n.a.createElement("circle",{cx:"68.263",cy:"73.801",fill:r,r:"3",transform:"rotate(0.169908 50 50)"},n.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",calcMode:"spline",values:"0 50 50;360 50 50",times:"0;1",keySplines:"0.5 0 0.5 1",repeatCount:"indefinite",dur:"1.5s",begin:"-0.062s"})),n.a.createElement("circle",{cx:"61.481",cy:"77.716",fill:r,r:"3",transform:"rotate(1.83976 50 50)"},n.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",calcMode:"spline",values:"0 50 50;360 50 50",times:"0;1",keySplines:"0.5 0 0.5 1",repeatCount:"indefinite",dur:"1.5s",begin:"-0.125s"})),n.a.createElement("circle",{cx:"53.916",cy:"79.743",fill:r,r:"3",transform:"rotate(5.37049 50 50)"},n.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",calcMode:"spline",values:"0 50 50;360 50 50",times:"0;1",keySplines:"0.5 0 0.5 1",repeatCount:"indefinite",dur:"1.5s",begin:"-0.187s"})),n.a.createElement("circle",{cx:"46.084",cy:"79.743",fill:r,r:"3",transform:"rotate(11.1162 50 50)"},n.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",calcMode:"spline",values:"0 50 50;360 50 50",times:"0;1",keySplines:"0.5 0 0.5 1",repeatCount:"indefinite",dur:"1.5s",begin:"-0.25s"})),n.a.createElement("circle",{cx:"38.519",cy:"77.716",fill:r,r:"3",transform:"rotate(19.1917 50 50)"},n.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",calcMode:"spline",values:"0 50 50;360 50 50",times:"0;1",keySplines:"0.5 0 0.5 1",repeatCount:"indefinite",dur:"1.5s",begin:"-0.312s"})),n.a.createElement("circle",{cx:"31.737",cy:"73.801",fill:r,r:"3",transform:"rotate(30.207 50 50)"},n.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",calcMode:"spline",values:"0 50 50;360 50 50",times:"0;1",keySplines:"0.5 0 0.5 1",repeatCount:"indefinite",dur:"1.5s",begin:"-0.375s"})),n.a.createElement("circle",{cx:"26.199",cy:"68.263",fill:r,r:"3",transform:"rotate(44.1593 50 50)"},n.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",calcMode:"spline",values:"0 50 50;360 50 50",times:"0;1",keySplines:"0.5 0 0.5 1",repeatCount:"indefinite",dur:"1.5s",begin:"-0.437s"})),n.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",calcMode:"spline",values:"0 50 50;0 50 50",times:"0;1",keySplines:"0.5 0 0.5 1",repeatCount:"indefinite",dur:"1.5s"}))))}}]),a}(n.a.PureComponent);De.defaultProps={width:"100%",height:"100%",color:"#d0a85d"};var Ie=De,Ae=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.text,a=e.width,r=e.height;return n.a.createElement("div",{className:"loadingPlaceholder"},n.a.createElement(Ie,{width:a,height:r,color:"#fff"}),n.a.createElement("span",{className:"placeholderText"},t))}}]),a}(n.a.PureComponent);Ae.defaultProps={text:"",width:"40px",height:"40px"};var Ue=Ae,ke=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s)))._sortUserByTimestamp=function(t,a){e.props.currentUser;return a.cookie===localStorage.jwtToken||t.timestamp-a.timestamp?1:-1},e._renderUsers=function(){var t=e.props,a=t.users,r=void 0===a?{}:a,s=t.currentUser,o=void 0===s?{}:s;return r&&0!==r.list.length?r.list.sort(e._sortUserByTimestamp).map((function(e){console.log(e);var t=localStorage.jwtToken===e.cookie,a={name:e.name,uuid:e.uuid,ID:o.uuid,isConnected:e.isConnected};return n.a.createElement(Te,{key:e.uuid,type:"direct",configuration:a,isCurrentUser:t})})):n.a.createElement(Ue,{text:"Trying to load users...",width:"40px",height:"40px"})},e}return Object(i.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"usersList"},this._renderUsers())}}]),a}(n.a.PureComponent);ke.defaultProps={currentUser:{uuid:null,name:""},users:[]};var xe=ke,Me=(Object(y.b)((function(e){return{users:e.users,currentUser:e.auth.user}}),null)(xe),function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s)))._renderRooms=function(){var t=e.props.rooms,a=void 0===t?{}:t;return a&&0!==a.length?a.map((function(e){var t={name:e.ID,uuid:e.uuid,ID:e.ID,isConnected:!0};return n.a.createElement(Te,{type:"rooms",key:e.uuid,configuration:t})})):n.a.createElement(Ue,{text:"Trying to load rooms...",width:"40px",height:"40px"})},e}return Object(i.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"usersList"},this._renderRooms())}}]),a}(n.a.PureComponent)),Re=Object(y.b)((function(e){return{rooms:e.chats.rooms}}),null)(Me),Le=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s)))._findFavorite=function(){var t=e.props,a=t.directs,r=t.rooms,n=t.users,s=t.favorites,o=t.currentUser,c=[];if(!s)return null;var i=function(e){var t=e.channels,a=e.type;t.forEach((function(e){s.forEach((function(t){if(t.ID===e.ID&&t.type===e.type){var r=Object(w.a)(Object(w.a)({},e),{},{channelType:a});if("direct"===a){var s=Number(e.ID)-Number(o.uuid),i=n.find((function(e){return e.uuid===s}));r.name=i.name,r.uuid=s}c.push(r)}}))}))};return i({channels:r,type:"rooms"}),i({channels:a,type:"direct"}),c},e._renderRooms=function(){var t=e.props,a=t.rooms,r=void 0===a?[]:a,s=t.users,o=void 0===s?[]:s;return!r&&!o||r.length+o.length===0?n.a.createElement(Ue,{text:"Trying to load favorites...",width:"40px",height:"40px"}):e._findFavorite().map((function(e){var t={name:e.name||e.ID,uuid:e.uuid,ID:Number(e.name&&e.uuid)||e.ID,isConnected:!0};return n.a.createElement(Te,{key:e.uuid,type:e.channelType,configuration:t})}))},e}return Object(i.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"usersList"},this._renderRooms())}}]),a}(n.a.PureComponent);Le.defaultProps={directs:[],rooms:[],users:[],favorites:[],currentUser:{}};var Pe=Le,Be=Object(y.b)((function(e){return{directs:e.chats.direct,users:e.users.list,rooms:e.chats.rooms,favorites:e.currentUser.favoriteChats,currentUser:e.currentUser}}),null)(Pe),He=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.children;return n.a.createElement("div",{className:"sectionTitleWrap"},n.a.createElement("span",{className:"sectionTitle usersTitle"},t),a,n.a.createElement("hr",{className:"boxShadowBefore"}))}}]),a}(n.a.PureComponent);He.defaultProps={title:"",children:[]};var Fe=He,Ge={favorites:{id:2,shift:-238},rooms:{id:1,shift:0}},We=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(c.a)(this,a),(r=t.call(this,e))._getMouseCoord=function(e){var t=e.touches&&e.touches[0].clientX&&Math.ceil(e.touches[0].clientX),a=e.clientX;return t||a},r._isMoveInDangerZone=function(e,t){return e-t>-3&&e-t<3},r._handleMove=function(e){var t=r.state.sliderTranlateXStart,a=r._getMouseCoord(e);r._isMoveInDangerZone(a,t)||r._getCurrentArea(a)},r._getCurrentArea=function(e){var t=r.state,a=t.sliderTranlateXStart,n=t.currentArea,s=function(t){e-a<-10&&r._setCurrentArea(t)},o=function(t){e-a>10&&r._setCurrentArea(t)};"users"===n?s("rooms"):"rooms"===n?(s("favorites"),o("users")):"favorites"===n&&o("rooms")},r._addMoveEvents=function(){r.ref.current.addEventListener("mousemove",r._handleMove),r.ref.current.addEventListener("touchmove",r._handleMove)},r._removeMoveEvents=function(){r.ref.current.removeEventListener("mousemove",r._handleMove),r.ref.current.removeEventListener("touchmove",r._handleMove)},r._handleDown=function(e){r._setStartCoords(e),r._addMoveEvents()},r._handleUp=function(){r._setStartCoords(),r._removeMoveEvents()},r._setCurrentArea=function(e){r.setState({currentArea:e})},r._setStartCoords=function(e){r.setState({sliderTranlateXStart:e?r._getMouseCoord(e):null})},r._handleSetCurrentArea=function(e){return r._setCurrentArea(e)},r._handleContexMenu=function(e){return e.preventDefault()},r._renderTitle=function(e){return n.a.createElement("div",{className:"titleSidebar"},n.a.createElement(Fe,{title:e}))},r._renderSection=function(e){var t=e.className,a=e.title,s=e.section;return n.a.createElement("div",{className:"sidebarSection ".concat(t)},r._renderTitle(a),s)},r.state={currentArea:"rooms",sliderTranlateXStart:null},r.ref=n.a.createRef(),r}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this.state.currentArea;t.currentArea!==a&&this._removeMoveEvents()}},{key:"componentWillUnmount",value:function(){this.ref.current.removeEventListener("mousemove",this._handleMove),this.ref.current.removeEventListener("touchmove",this._handleMove)}},{key:"render",value:function(){var e=this.state.currentArea,t=this.props.showSidebar,a=Ge[e]||{},r=a.shift,s=a.id,o=be()({sidebar:!0,sidebarListShow:t});return n.a.createElement("aside",{id:"sidebar",role:"slider","aria-valuemax":238,"aria-valuemin":0,"aria-valuenow":0,tabIndex:0,ref:this.ref,onTouchStart:this._handleDown,onTouchEnd:this._handleUp,onMouseDown:this._handleDown,onMouseUp:this._handleUp,onMouseLeave:this._handleUp,onContextMenu:this._handleContexMenu,className:o},n.a.createElement("div",{style:{transform:"translateX(".concat(r,"px)")},className:"sidebarSectionsContainer"},this._renderSection({className:"roomsSection",title:"Rooms",section:n.a.createElement(Re,null)}),this._renderSection({className:"roomsSection",title:"Rooms",section:n.a.createElement(Re,null)}),this._renderSection({className:"favoritesSection",title:"Favorites",section:n.a.createElement(Be,null)})),n.a.createElement(we,{areas:Object.keys(Ge).length,activeArea:s,setActiveArea:this._handleSetCurrentArea}))}}]),a}(n.a.PureComponent);We.defaultProps={showSidebar:!1};var Ve=We,Je={thin:n.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"-2 -2 28 28",fill:"currentColor"},n.a.createElement("path",{d:"M6.28 3c3.236.001 4.973 3.491 5.72 5.031.75-1.547 2.469-5.021 5.726-5.021 2.058 0 4.274 1.309 4.274 4.182 0 3.442-4.744 7.851-10 13-5.258-5.151-10-9.559-10-13 0-2.676 1.965-4.193 4.28-4.192zm.001-2c-3.183 0-6.281 2.187-6.281 6.192 0 4.661 5.57 9.427 12 15.808 6.43-6.381 12-11.147 12-15.808 0-4.011-3.097-6.182-6.274-6.182-2.204 0-4.446 1.042-5.726 3.238-1.285-2.206-3.522-3.248-5.719-3.248z"})),full:n.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"-2 -2 28 28",fill:"currentColor"},n.a.createElement("path",{d:"M12 4.248c-3.148-5.402-12-3.825-12 2.944 0 4.661 5.571 9.427 12 15.808 6.43-6.381 12-11.147 12-15.808 0-6.792-8.875-8.306-12-2.944z"}))},Ye=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s)))._handleToggleClick=function(){var t=e.props,a=t.showSidebar,r=t.sidebarToggler;!a&&r()},e._handleFavoriteClick=function(){var t=e.props;(0,t.setFavorite)({userID:t.currentUserID,chat:{ID:t.currentChatID,type:t.currentChatType}})},e._getSidebarToggle=function(){var t=e.props.showSidebar,a=void 0!==t&&t;return n.a.createElement("button",{className:"asideButtonToggle".concat(a?" asideButtonToggleActive":""),type:"button",onClick:e._handleToggleClick},"Sidebar")},e._getFavoriteButton=function(){var t=e.props,a=t.userFavoriteChats,r=t.currentChatID,s=t.currentChatType,o=Je.thin,c=Je.full,i=a.find((function(e){return e.ID===r&&e.type===s}))?c:o;return n.a.createElement("span",{className:"usersRoomFavorite"},n.a.createElement("button",{type:"button",className:"usersRoomFavoriteButton",onClick:e._handleFavoriteClick},i))},e._getUsersCountInChat=function(){var t=e.props.users;return n.a.createElement("span",{className:"usersRoomCount"},n.a.createElement("i",{className:"usersRoomCountIcon"}),t.length)},e._getConnectionStatus=function(){var t=e.props.connectionStatus,a=be()({"connectionStatusIcon\u0421onnected":"connected"===t,connectionStatusIconDisconnected:"disconnected"===t});return n.a.createElement("span",{className:"connectionStatus"},n.a.createElement("i",{className:"connectionStatusIconMain"}),n.a.createElement("i",{className:"connectionStatusIcon ".concat(a)}))},e}return Object(i.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"statusesWrap"},this._getSidebarToggle(),this._getFavoriteButton(),"|",this._getUsersCountInChat(),"|",this._getConnectionStatus())}}]),a}(n.a.Component);Ye.defaultProps={showSidebar:!1,connectionStatus:"disconnected",sidebarToggler:function(){},setFavorite:function(){},userFavoriteChats:[],currentUserID:null,currentChatID:null,currentChatType:null,isFavorite:!1,users:[]};var ze=Ye,Xe=Object(y.b)((function(e){return{isFavorite:e.currentChat.isFavorite,currentUserID:e.auth.user.uuid,currentChatID:e.currentChat.chatID,currentChatType:e.currentChat.chatType,userFavoriteChats:e.currentUser.favoriteChats,showSidebar:e.common.showSidebar,connectionStatus:e.currentUser.connectionStatus,users:e.users.list}}),(function(e){return{sidebarToggler:function(){return e({type:"SIDEBAR_TOGGLER"})},setFavorite:function(t){return e(function(e){return{type:"SET_FAVORITE",payload:e}}(t))}}}))(ze),Ze=function(e){var t=new Date(e),a=t.getHours()<10?"0".concat(t.getHours()):t.getHours(),r=t.getMinutes()<10?"0".concat(t.getMinutes()):t.getMinutes();return"".concat(a,":").concat(r)},Ke=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.message,a=e.author,r=e.timestamp;return n.a.createElement("div",{className:"message messageWrap"},n.a.createElement("span",{className:"authorWrap"},n.a.createElement("svg",{width:"100%",height:"100%","data-jdenticon-value":a})),n.a.createElement("div",{className:"messageContainer"},n.a.createElement("div",{className:"messageTopSection"},n.a.createElement("span",{className:"authorName"},a),n.a.createElement("span",{className:"messageTimestamp"},Ze(r))),n.a.createElement("div",{className:"messageBottomSection"},n.a.createElement("span",{className:"textWrap"},t))))}}]),a}(n.a.PureComponent),qe=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n)))._renderDate=function(){var t=e.props.timestamp;return Ze(t)},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.isCurrentUser,a=e.message,r=e.uuid;return n.a.createElement("div",{key:r,className:"message newUserConnectedWrap".concat(t?" newUsercurrentUserMessage":"")},n.a.createElement("span",{className:"newUserConnectedMessage"},a),n.a.createElement("span",{className:"newUserConnectedTimestamp"},this._renderDate()))}}]),a}(n.a.PureComponent);qe.defaultProps={isCurrentUser:!1};var $e=qe,Qe=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(c.a)(this,a),(r=t.call(this,e))._messageTypes={user:function(e){return n.a.createElement($e,Object.assign({key:e.uuid},e))},message:function(e){return n.a.createElement(Ke,Object.assign({key:e.uuid},e))}},r._setScrollHeightState=function(){r.setState({scrollHeight:r.ref.current.scrollHeight||0})},r._setScrollTop=function(){var e=r.ref.current;e.scrollTop=e.scrollHeight},r._getCurrentUserMessages=function(e){var t=r.props.currentUserName;return e&&0!==e.length?e.map((function(e){var a=e.message.split(" "),r="user"===e.layout&&a[0]===t;return r?(a[0]="You",a[1]="is"===a[1]?"are":"have",a[2]="have"===a[1]?"leaved":a[2],Object(w.a)(Object(w.a)(Object(w.a)({},e),r&&{isCurrentUser:r}),{},{message:a.join(" ")})):e})):n.a.createElement(Ue,{text:"Trying to load message list...",width:"40px",height:"40px"})},r._renderMessages=function(){var e=r.props.messages,t=void 0===e?[]:e;return t&&0!==t.length?r._getCurrentUserMessages(t).map((function(e){return(r._messageTypes[e.layout]||r._messageTypes.message)(e)})):n.a.createElement(Ue,{text:"Trying to load message list...",width:"40px",height:"40px"})},r.state={scrollHeight:0},r.ref=n.a.createRef(),r}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this._setScrollHeightState()}},{key:"componentDidUpdate",value:function(e,t){t.scrollHeight!==this.ref.current.scrollHeight&&(this._setScrollHeightState(),this._setScrollTop())}},{key:"render",value:function(){return n.a.createElement("div",{ref:this.ref,className:"messagesList"},this._renderMessages())}}]),a}(n.a.Component);Qe.defaultProps={currentUserName:"",typingUsers:[]};var et=Qe,tt=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n)))._getCurrentChatMessages=function(){var t=e.props,a=t.chats,r=t.currentChat,n=r.chatType,s=r.chatID;return a[n]&&a[n].find((function(e){return e.ID===s||!1}))||[]},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.currentUserName,t=this._getCurrentChatMessages().messages,a=void 0===t?[]:t;return n.a.createElement(et,{messages:a,currentUserName:e})}}]),a}(n.a.Component);tt.defaultProps={chats:{},currentUserName:"",currentChat:{chatType:"rooms",chatID:"global"}};var at=tt,rt=Object(y.b)((function(e){return{chats:e.chats,currentUserName:e.auth.user.name,currentChat:e.currentChat}}),null)(at),nt=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n)))._findCurrentChatTypingUsers=function(){var t=e.props,a=t.currentChat,r=void 0===a?{}:a,n=t.typingUsers,s=[];return(void 0===n?[]:n).forEach((function(e){e.chat.chatID===r.chatID&&e.chat.chatType===r.chatType&&s.push(e)})),s},e._getTypingUsers=function(e){var t="";return e.forEach((function(a,r){t+=r===e.length-1?a.name:"".concat(a.name,", ")})),t},e._renderTypingText=function(t){var a=e.props.typingUsers.length>1?"are":"is",r=e._getTypingUsers(t);return"".concat(r," ").concat(a," ").concat("typing")},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this._findCurrentChatTypingUsers();return 0===e.length?null:n.a.createElement("div",{className:"liveMessageWrap"},n.a.createElement("span",{className:"liveMessageText"},"".concat(this._renderTypingText(e))),n.a.createElement("span",{className:"liveDots"}))}}]),a}(n.a.PureComponent);nt.defaultProps={currentChat:{},typingUsers:[],isSomeoneTyping:!1};var st=nt,ot=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(c.a)(this,a),(r=t.call(this,e))._getMessageTimestamp=function(){return Date.now()},r._handleSendMessage=function(){var e=r.state.value,t=r.props,a=t.currentChat,n=a.chatType,s=a.chatID,o=t.currentUser,c=(o.name,o.uuid),i=o.connectionStatus,u=t.dispatchMessage;e&&0!==e.length&&"connected"===i&&(u({chat:{type:n,ID:s},messageType:"message",message:e,uuid:r.props.auth.user.id,uuidAuthor:c,author:r.props.auth.user.name,timestamp:r._getMessageTimestamp()}),r._resetStateValue())},r._setStateValue=function(e){r.setState({value:e.target.value})},r._resetStateValue=function(){r.setState({value:""})},r._onKeyPressHandler=function(e){"Enter"===e.key&&r._handleSendMessage()},r._onClickHandler=function(){r._handleSendMessage()},r._onChangeHandler=function(e){var t=r.props,a=t.currentChat,n=t.currentUser,s=n.name,o=n.uuid;(0,t.dispatchLiveTyping)({chat:a,author:s,uuid:o}),r._setStateValue(e)},r.state={value:""},r}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.value;return n.a.createElement("section",{id:"new-message"},n.a.createElement("input",{onKeyPress:this._onKeyPressHandler,onChange:this._onChangeHandler,type:"text",placeholder:"Type your message...",value:e}),n.a.createElement("button",{className:"sendMessageButton".concat(e?" sendMessageButtonActive":""),type:"button",onClick:this._onClickHandler},n.a.createElement("svg",{fill:"#fff",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"25px",height:"25px"},n.a.createElement("path",{d:"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"}))))}}]),a}(n.a.PureComponent),ct=Object(y.b)((function(e){return{currentUser:e.currentUser,currentChat:e.currentChat,auth:e.auth}}),(function(e){return{dispatchMessage:function(t){return e(function(e){var t=e.chat,a=e.messageType,r=e.message;return{type:"ADD_MESSAGE",chat:t,messageType:a,uuid:e.uuid,message:r,uuidAuthor:e.uuidAuthor,author:e.author,timestamp:e.timestamp}}(t))},dispatchLiveTyping:function(t){return e(function(e){return{type:"USER_TYPING",payload:e}}(t))}}}))(ot),it=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s)))._hideSidebar=function(){var t=e.props,a=t.showSidebar,r=t.hideSidebar;a&&r()},e._handleClick=function(){e._hideSidebar()},e._getUsersCountInChat=function(){var t=e.props.users;return n.a.createElement("span",{className:"usersRoomCount"},n.a.createElement("i",{className:"usersRoomCountIcon"}),"".concat(t.length," | "))},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.currentChat,a=e.typingUsers;return n.a.createElement("section",{role:"button",onKeyDown:void 0,id:"main",onClick:this._handleClick},n.a.createElement("div",{className:"topSectionMain"},n.a.createElement(Fe,{title:"#".concat(t.title)},n.a.createElement(Xe,null))),n.a.createElement("div",{className:"middleSectionMain"},n.a.createElement(rt,null),n.a.createElement(st,{currentChat:t,typingUsers:a})),n.a.createElement("div",{className:"bottomSectionMain"},n.a.createElement(ct,null)))}}]),a}(n.a.Component);it.defaultProps={currentChat:{title:"global",chatType:"global",chatID:"global"},connectionStatus:"",typingUsers:[],users:[],showSidebar:!1,hideSidebar:function(){}};var ut=it,lt=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.type;return n.a.createElement("div",{className:"popUpContainer ".concat(a)},t)}}]),a}(r.PureComponent);lt.defaultProps={type:""};var dt=lt,mt={userDisconnected:{message:"You're disconnected due to the non-activity! Refresh the page to restart, please.",type:"error",classNames:"errorText",isCloseButton:!0,button:{active:!0,type:"link",href:document.location.href,buttonClass:"",target:"_self",buttonText:"Reload"}},userIsNotConnected:{message:"You're still don't connected to the server. Doing my best...",type:"info",classNames:"infoText",showSpinner:!0}},pt=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s)))._getDebugData=function(){var t=e.props.errorType;return t&&mt[t]?mt[t]:{}},e._renderMessage=function(){var t=e._getDebugData(),a=t.className,r=void 0===a?"":a,s=t.message,o=void 0===s?"":s;return n.a.createElement("span",{className:"debugText ".concat(r)},o)},e._renderSpinner=function(){var t=e._getDebugData().showSpinner;return void 0!==t&&t?n.a.createElement(Ie,{width:"50px",height:"50px"}):null},e._getCustomButton=function(){var t=e._getDebugData().button;if(!t||!t.active)return null;var a=t.type,r=void 0===a?"button":a,s=t.href,o=void 0===s?"":s,c=t.buttonClass,i=void 0===c?"":c,u=t.buttonText,l=void 0===u?"":u,d=t.target,m=void 0===d?"":d,p="button"!==r,h=p?"a":"button",f=Object(w.a)({type:"button",className:"debugButton ".concat(i)},p&&{href:o,target:m});return n.a.createElement(h,f,l)},e._getCloseButton=function(){var t=e.props.hideDebugFunc;return e._getDebugData().isCloseButton?n.a.createElement("button",{type:"button",className:"debugButton closeDebugButton",onClick:t},"Close"):null},e._renderButtons=function(){return n.a.createElement("div",{className:"debugButtonsWrap"},e._getCustomButton(),e._getCloseButton())},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.showDebug,t=this._getDebugData(),a=t.type,r=void 0===a?"":a,s=t.message,o=void 0===s?"":s,c=t.showSpinner,i=void 0===c?"":c;return e&&o?n.a.createElement(dt,{type:r},n.a.createElement("div",{className:"debugContainer".concat(i&&" spinner")},this._renderMessage(),this._renderSpinner(),this._renderButtons())):null}}]),a}(n.a.PureComponent);pt.defaultProps={errorType:"",showDebug:!1,hideDebugFunc:function(){}};Object(y.b)((function(e){return{errorType:e.debug.errorType,showDebug:e.debug.showDebug}}),null)(pt);var ht=Object(y.b)((function(e){return{showSidebar:e.common.showSidebar}}),null)(Ve),ft=Object(y.b)((function(e){return{users:e.users.list,showSidebar:e.common.showSidebar,connectionStatus:e.auth.user.connectionStatus,currentChat:e.currentChat,typingUsers:e.common.typingUsers}}),(function(e){return{sidebarToggler:function(){return e({type:"SIDEBAR_TOGGLER"})},hideSidebar:function(){return e({type:"HIDE_SIDEBAR",status:!1})}}}))(ut),vt=(a(82),function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s)))._connectionLayoutChecker=function(){var t=e.props,a=t.connectionStatus,r=t.disableBlurOverlay;return be()({connectedUserOvelay:"connected"===a,disconnectedUserOverlay:"disconnected"===a,destroyBlurOverlay:r})},e._renderMainApp=function(){return n.a.createElement("div",{id:"container"},n.a.createElement(ht,null),n.a.createElement(ft,null))},e}return Object(i.a)(a,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,this._renderMainApp())}}]),a}(n.a.Component));vt.defaultProps={connectionStatus:"",isAuth:!1,disableBlurOverlay:!1};var gt=Object(y.b)((function(e){return{connectionStatus:e.currentUser.connectionStatus,disableBlurOverlay:e.common.disableBlurOverlay,isAuth:e.currentUser.isAuth}}),null)(vt),bt=Object(y.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.component,a=e.auth,r=Object(B.a)(e,["component","auth"]);return n.a.createElement(m.b,Object.assign({},r,{render:function(e){return!0===a.isAuthenticated?n.a.createElement("div",{className:"mainWrap"},n.a.createElement(t,e),n.a.createElement(gt,null)):n.a.createElement(m.a,{to:"/login"})}}))})),Et=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).onLogoutClick=function(t){t.preventDefault(),e.props.userDisconected(),e.props.logoutUser()},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.auth.user;return n.a.createElement("div",{style:{height:"75vh"},className:"container valign-wrapper"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col s12 center-align"},n.a.createElement("h4",null,n.a.createElement("b",null,"Hey there,")," ",e.name.split(" ")[0],n.a.createElement("p",{className:"flow-text grey-text text-darken-1"},"You are logged into a Chat App"," ",n.a.createElement("span",{style:{fontFamily:"monospace"}})," \ud83d\udc4f")),n.a.createElement("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},onClick:this.onLogoutClick,className:"btn btn-large waves-effect waves-light hoverable blue accent-3"},"Logout"))))}}]),a}(r.Component),yt=Object(y.b)((function(e){return{auth:e.auth}}),{logoutUser:E,userDisconected:P})(Et);if(localStorage.jwtToken){var Ot=localStorage.jwtToken;g(Ot);var Ct=h()(Ot);he.dispatch(b(Ct));var St=Date.now()/1e3;Ct.exp<St&&(he.dispatch(E()),window.location.href="./login")}var _t=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return n.a.createElement(y.a,{store:he},n.a.createElement(d.a,null,n.a.createElement("div",{className:"App"},n.a.createElement(fe,null),n.a.createElement(m.b,{exact:!0,path:"/",component:ve}),n.a.createElement(m.b,{exact:!0,path:"/register",component:ye}),n.a.createElement(m.b,{exact:!0,path:"/login",component:Ce}),n.a.createElement(m.d,null,n.a.createElement(bt,{exact:!0,path:"/dashboard",component:yt})))))}}]),a}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(_t,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[50,1,2]]]);
//# sourceMappingURL=main.89f77c73.chunk.js.map